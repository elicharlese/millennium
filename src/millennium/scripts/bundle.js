"use strict";var Millennium=(()=>{var I=Object.defineProperty,Te=Object.defineProperties,ve=Object.getOwnPropertyDescriptor,Oe=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertyNames,pe=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var ee=(n,e,i)=>e in n?I(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,d=(n,e)=>{for(var i in e||(e={}))de.call(e,i)&&ee(n,i,e[i]);if(pe)for(var i of pe(e))Me.call(e,i)&&ee(n,i,e[i]);return n},x=(n,e)=>Te(n,Oe(e));var p=(n,e)=>{for(var i in e)I(n,i,{get:e[i],enumerable:!0})},Ce=(n,e,i,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ee(e))!de.call(n,o)&&o!==i&&I(n,o,{get:()=>e[o],enumerable:!(t=ve(e,o))||t.enumerable});return n};var Le=n=>Ce(I({},"__esModule",{value:!0}),n);var c=(n,e,i)=>(ee(n,typeof e!="symbol"?e+"":e,i),i);var ui={};p(ui,{BaseDirectory:()=>S,LogicalPosition:()=>M,LogicalSize:()=>E,PhysicalPosition:()=>P,PhysicalSize:()=>b,UserAttentionType:()=>Z,WebviewWindow:()=>y,app:()=>W,appWindow:()=>D,cli:()=>A,clipboard:()=>z,commandLine:()=>A,dialog:()=>H,event:()=>V,fileSystem:()=>O,fs:()=>O,getAssetUri:()=>ge,globalShortcut:()=>q,http:()=>B,invoke:()=>R,millennium:()=>k,notification:()=>j,os:()=>$,path:()=>J,platform:()=>N,process:()=>K,shell:()=>X,transformCallback:()=>f,updater:()=>Q,window:()=>C,windows:()=>C});var W={};p(W,{getMillenniumVersion:()=>De,getName:()=>Ue,getVersion:()=>Se,hide:()=>Ne,show:()=>Ie});var k={};p(k,{getAssetUri:()=>ge,invoke:()=>R,transformCallback:()=>f});var N={};p(N,{isLinux:()=>ne,isMacOS:()=>ie,isWindows:()=>h});function ne(){var n,e;return/linux/i.test((e=(n=navigator.userAgentData)==null?void 0:n.platform)!=null?e:navigator.userAgent)}function h(){var n,e;return/win/i.test((e=(n=navigator.userAgentData)==null?void 0:n.platform)!=null?e:navigator.userAgent)}function ie(){var n,e;return/macintosh/i.test((e=(n=navigator.userAgentData)==null?void 0:n.platform)!=null?e:navigator.userAgent)}function Fe(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function f(n,e=!1){let i=Fe(),t=`_${i}`;return Object.defineProperty(window,t,{value:o=>(e&&delete window[t],n==null?void 0:n(o)),writable:!0,enumerable:!1,configurable:!0}),i}async function R(n,e={}){return new Promise((i,t)=>{let o=f(l=>{i(l),delete window[`_${s}`]},!0),s=f(l=>{t(new Error(l)),delete window[`_${o}`]},!0);window.__MILLENNIUM_IPC__(d({cmd:n,callback:o,error:s},e))})}function ge(n,e="asset"){let i=encodeURIComponent(n);return h()?`https://${e}.localhost/${i}`:`${e}://localhost/${i}`}async function r(n){return R("millennium",n)}async function Se(){return r({__millenniumModule:"App",message:{cmd:"getAppVersion"}})}async function Ue(){return r({__millenniumModule:"App",message:{cmd:"getAppName"}})}async function De(){return r({__millenniumModule:"App",message:{cmd:"getMillenniumVersion"}})}async function Ie(){return r({__millenniumModule:"App",message:{cmd:"show"}})}async function Ne(){return r({__millenniumModule:"App",message:{cmd:"hide"}})}var A={};p(A,{getMatches:()=>Re});async function Re(){return await r({__millenniumModule:"Cli",message:{cmd:"cliMatches"}})}var z={};p(z,{readText:()=>We,writeText:()=>ke});async function ke(n){return r({__millenniumModule:"Clipboard",message:{cmd:"writeText",data:n}})}async function We(){return r({__millenniumModule:"Clipboard",message:{cmd:"readText",data:null}})}var H={};p(H,{ask:()=>Ve,confirm:()=>qe,message:()=>Ge,open:()=>ze,save:()=>He});async function ze(n={}){return typeof n=="object"&&Object.freeze(n),await r({__millenniumModule:"Dialog",message:{cmd:"openDialog",options:n}})}async function He(n={}){return typeof n=="object"&&Object.freeze(n),await r({__millenniumModule:"Dialog",message:{cmd:"saveDialog",options:n}})}async function Ge(n,e){var t,o;let i=typeof e=="string"?{title:e}:e;return await r({__millenniumModule:"Dialog",message:{cmd:"messageDialog",message:n.toString(),title:(t=i==null?void 0:i.title)==null?void 0:t.toString(),type:i==null?void 0:i.type,buttonLabel:(o=i==null?void 0:i.okLabel)==null?void 0:o.toString()}})}async function Ve(n,e){var t,o,s,l,L;let i=typeof e=="string"?{title:e}:e;return await r({__millenniumModule:"Dialog",message:{cmd:"askDialog",message:n.toString(),title:(t=i==null?void 0:i.title)==null?void 0:t.toString(),type:i==null?void 0:i.type,buttonLabels:[(s=(o=i==null?void 0:i.okLabel)==null?void 0:o.toString())!=null?s:"Yes",(L=(l=i==null?void 0:i.cancelLabel)==null?void 0:l.toString())!=null?L:"No"]}})}async function qe(n,e){var t,o,s,l,L;let i=typeof e=="string"?{title:e}:e;return await r({__millenniumModule:"Dialog",message:{cmd:"confirmDialog",message:n.toString(),title:(t=i==null?void 0:i.title)==null?void 0:t.toString(),type:i==null?void 0:i.type,buttonLabels:[(s=(o=i==null?void 0:i.okLabel)==null?void 0:o.toString())!=null?s:"Ok",(L=(l=i==null?void 0:i.cancelLabel)==null?void 0:l.toString())!=null?L:"Cancel"]}})}var V={};p(V,{MillenniumEvent:()=>G,emit:()=>T,listen:()=>v,once:()=>F});var G=(m=>(m.WINDOW_RESIZED="millennium://resize",m.WINDOW_MOVED="millennium://move",m.WINDOW_CLOSE_REQUESTED="millennium://close-requested",m.WINDOW_CREATED="millennium://window-created",m.WINDOW_DESTROYED="millennium://window-destroyed",m.WINDOW_FOCUS="millennium://focus",m.WINDOW_BLUR="millennium://blur",m.WINDOW_SCALE_FACTOR_CHANGED="millennium://scale-change",m.WINDOW_THEME_CHANGED="millennium://theme-changed",m.WINDOW_FILE_DROP="millennium://file-drop",m.WINDOW_FILE_DROP_HOVER="millennium://file-drop-hover",m.WINDOW_FILE_DROP_CANCELLED="millennium://file-drop-cancelled",m.MENU="millennium://menu",m.UPDATE_CHECK="millennium://update",m.UPDATE_AVAILABLE="millennium://update-available",m.UPDATE_INSTALL="millennium://update-install",m.UPDATE_STATUS="millennium://update-status",m.UPDATE_DOWNLOAD_PROGRESS="millennium://update-download-progress",m.ERROR="millennium://error",m))(G||{});async function fe(n,e){return r({__millenniumModule:"Event",message:{cmd:"unlisten",event:n,eventId:e}})}async function T(n,e,i){await r({__millenniumModule:"Event",message:{cmd:"emit",event:n,windowLabel:e,payload:i}})}async function v(n,e,i){let t=await r({__millenniumModule:"Event",message:{cmd:"listen",event:n,windowLabel:e,handler:f(i)}});return async()=>fe(n,t)}async function F(n,e,i){return v(n,e,t=>{i(t),fe(n,t.id).catch(()=>{})})}var O={};p(O,{BaseDirectory:()=>S,copyFile:()=>Ke,exists:()=>Ze,mkdir:()=>$e,readBinaryFile:()=>he,readFile:()=>Ye,readTextFile:()=>ye,readdir:()=>je,removeFile:()=>Xe,rename:()=>Qe,rmdir:()=>Je,writeBinaryFile:()=>te,writeFile:()=>Be,writeTextFile:()=>we});var S=(a=>(a[a.AUDIO=1]="AUDIO",a[a.CACHE=2]="CACHE",a[a.CONFIG=3]="CONFIG",a[a.DATA=4]="DATA",a[a.LOCALDATA=5]="LOCALDATA",a[a.DESKTOP=6]="DESKTOP",a[a.DOCUMENT=7]="DOCUMENT",a[a.DOWNLOAD=8]="DOWNLOAD",a[a.EXECUTABLE=9]="EXECUTABLE",a[a.FONT=10]="FONT",a[a.HOME=11]="HOME",a[a.PICTURES=12]="PICTURES",a[a.PUBLIC=13]="PUBLIC",a[a.RUNTIME=14]="RUNTIME",a[a.TEMPLATES=15]="TEMPLATES",a[a.VIDEOS=16]="VIDEOS",a[a.RESOURCE=17]="RESOURCE",a[a.APP=18]="APP",a[a.LOG=19]="LOG",a[a.TEMP=20]="TEMP",a[a.APPCONFIG=21]="APPCONFIG",a[a.APPDATA=22]="APPDATA",a[a.APPLOCALDATA=23]="APPLOCALDATA",a[a.APPCACHE=24]="APPCACHE",a[a.APPLOG=25]="APPLOG",a))(S||{});async function ye(n,e={}){return await r({__millenniumModule:"Fs",message:{cmd:"readTextFile",path:n,options:e}})}async function he(n,e={}){return await r({__millenniumModule:"Fs",message:{cmd:"readFile",path:n,options:e}})}async function Ye(n,e,i={}){switch(typeof e!="string"&&(i=e,e="binary"),e){case"utf8":case"utf-8":return await ye(n,i);case"binary":return await he(n,i);default:throw new Error(`Unsupported encoding: '${e}'. Consider reading as binary and using \`TextDecoder\`.`)}}async function we(n,e,i){let t={path:"",contents:""},o=i;return typeof n=="string"?t.path=n:(t.path=n.path,t.contents=n.contents),typeof e=="string"?t.contents=e!=null?e:"":o=e,await r({__millenniumModule:"Fs",message:{cmd:"writeTextFile",path:t.path,contents:Array.from(new TextEncoder().encode(t.contents)),options:o}})}async function te(n,e,i){let t={path:"",contents:[]},o=i;return typeof n=="string"?t.path=n:(t.path=n.path,t.contents=n.contents),e&&"dir"in e?o=e:typeof n=="string"&&(t.contents=e!=null?e:[]),await r({__millenniumModule:"Fs",message:{cmd:"writeFile",path:t.path,contents:Array.from(t.contents instanceof ArrayBuffer||t.contents instanceof SharedArrayBuffer?new Uint8Array(t.contents):t.contents),options:o}})}async function Be(n,e,i){if(typeof e=="string")return await we({path:n,contents:e},i);if(e instanceof ArrayBuffer||e instanceof SharedArrayBuffer)return await te({path:n,contents:Array.from(new Uint8Array(e))},i);if([DataView,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array].some(t=>e instanceof t)||typeof Float64Array<"u"&&e instanceof Float64Array||typeof BigInt64Array<"u"&&e instanceof BigInt64Array||typeof BigUint64Array<"u"&&e instanceof BigUint64Array)return await te({path:n,contents:Array.from(new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)))},i);throw new Error(`Unsupported contents type: '${{}.toString.call(e)}'.`)}var _=(n,e)=>r({__millenniumModule:"Fs",message:d({cmd:n},e)});async function je(n,e={}){return await _("readDir",{path:n,options:e})}async function $e(n,e={}){return await _("createDir",{path:n,options:e})}async function Je(n,e={}){return await _("removeDir",{path:n,options:e})}async function Ke(n,e,i={}){return await _("copyFile",{source:n,destination:e,options:i})}async function Xe(n,e={}){return await _("removeFile",{path:n,options:e})}async function Qe(n,e,i={}){return await _("rename",{oldPath:n,newPath:e,options:i})}async function Ze(n,e={}){return await _("exists",{path:n,options:e})}var q={};p(q,{isRegistered:()=>tn,register:()=>en,registerAll:()=>nn,unregister:()=>rn,unregisterAll:()=>on});async function en(n,e){return await r({__millenniumModule:"GlobalShortcut",message:{cmd:"register",shortcut:n,handler:f(e)}})}async function nn(n,e){return await r({__millenniumModule:"GlobalShortcut",message:{cmd:"registerAll",shortcuts:n,handler:f(e)}})}async function tn(n){return await r({__millenniumModule:"GlobalShortcut",message:{cmd:"isRegistered",shortcut:n}})}async function rn(n){return await r({__millenniumModule:"GlobalShortcut",message:{cmd:"unregister",shortcut:n}})}async function on(){return await r({__millenniumModule:"GlobalShortcut",message:{cmd:"unregisterAll"}})}var B={};p(B,{Body:()=>w,Response:()=>Y,ResponseType:()=>be,createClient:()=>Pe,fetch:()=>sn});var be=(t=>(t[t.JSON=1]="JSON",t[t.TEXT=2]="TEXT",t[t.BINARY=3]="BINARY",t))(be||{}),w=class{constructor(e,i){this.type=e;this.payload=i}static form(e){let i={},t=(o,s)=>{s!==null&&(i[String(o)]=typeof s=="string"?s:s instanceof Uint8Array||Array.isArray(s)?Array.from(s):s instanceof File?{file:s.name,mime:s.type,fileName:s.name}:typeof s.file=="string"?{file:s.file,mime:s.mime,fileName:s.fileName}:{file:Array.from(s.file),mime:s.mime,fileName:s.fileName})};if(e instanceof FormData)for(let[o,s]of e)t(o,s);else for(let[o,s]of Object.entries(e))t(o,s);return new w("Form",i)}static json(e){return new w("Json",e)}static text(e){return new w("Text",e)}static binary(e){return new w("Bytes",Array.from(e instanceof ArrayBuffer||e instanceof SharedArrayBuffer?new Uint8Array(e):e))}},Y=class{constructor(e){c(this,"url");c(this,"status");c(this,"ok");c(this,"headers");c(this,"rawHeaders");c(this,"data");this.url=e.url,this.status=e.status,this.ok=e.status>=200&&e.status<300,this.headers=e.headers,this.rawHeaders=e.rawHeaders,this.data=e.data}},oe=class{constructor(e){this.id=e}async drop(){return r({__millenniumModule:"Http",message:{cmd:"dropClient",client:this.id}})}async request(e){let i=!e.responseType||e.responseType===1;i&&(e.responseType=2);let t=await r({__millenniumModule:"Http",message:{cmd:"httpRequest",client:this.id,options:e}}),o=new Y(t);if(i)try{o.data=JSON.parse(o.data)}catch(s){if(o.ok&&o.data==="")o.data={};else if(o.ok)throw new Error(`Failed to parse response body (\`${o.data}\`): ${s}
Try setting the responseType to a different type if the API doesn't return JSON.`)}return o}async get(e,i){return this.request(x(d({},i),{method:"GET",url:e}))}async post(e,i,t){return this.request(x(d({},t),{method:"POST",body:i,url:e}))}async put(e,i,t){return this.request(x(d({},t),{method:"PUT",body:i,url:e}))}async patch(e,i){return this.request(x(d({},i),{method:"PATCH",url:e}))}async delete(e,i){return this.request(x(d({},i),{method:"DELETE",url:e}))}};async function Pe(n){let e=await r({__millenniumModule:"Http",message:{cmd:"createClient",options:n}});return new oe(e)}var re=null;async function sn(n,e){var i;return re||(re=await Pe()),re.request(x(d({},e),{url:n,method:(i=e==null?void 0:e.method)!=null?i:"GET"}))}var j={};p(j,{isPermissionGranted:()=>an,requestPermission:()=>ln,sendNotification:()=>un});async function an(){return window.Notification.permission!=="default"?Promise.resolve(window.Notification.permission==="granted"):r({__millenniumModule:"Notification",message:{cmd:"isNotificationPermissionGranted"}})}async function ln(){return window.Notification.requestPermission()}function un(n){return typeof n=="string"?new window.Notification(n):new window.Notification(n.title,n)}var $={};p($,{arch:()=>gn,eol:()=>mn,platform:()=>cn,tmpdir:()=>fn,type:()=>dn,version:()=>pn});var mn=h()?`\r
`:`
`;async function cn(){return r({__millenniumModule:"Os",message:{cmd:"platform"}})}async function pn(){return r({__millenniumModule:"Os",message:{cmd:"version"}})}async function dn(){return r({__millenniumModule:"Os",message:{cmd:"type"}})}async function gn(){return r({__millenniumModule:"Os",message:{cmd:"arch"}})}async function fn(){return r({__millenniumModule:"Os",message:{cmd:"tempdir"}})}var J={};p(J,{appCacheDir:()=>bn,appConfigDir:()=>yn,appDataDir:()=>hn,appLocalData:()=>wn,appLogDir:()=>Pn,audioDir:()=>xn,basename:()=>Bn,cacheDir:()=>_n,configDir:()=>An,dataDir:()=>Tn,delimiter:()=>Wn,desktopDir:()=>vn,dirname:()=>qn,documentsDir:()=>On,downloadsDir:()=>En,executableDir:()=>Mn,extname:()=>Yn,fontDir:()=>Cn,homeDir:()=>Ln,isAbsolute:()=>jn,join:()=>Vn,localDataDir:()=>Fn,normalize:()=>Gn,pictureDir:()=>Sn,publicDir:()=>Un,resolve:()=>zn,resolveResource:()=>Hn,resourceDir:()=>Dn,runtimeDir:()=>In,sep:()=>kn,templateDir:()=>Nn,videosDir:()=>Rn});var u=async n=>await r({__millenniumModule:"Path",message:{cmd:"resolvePath",path:"",directory:n}});async function yn(){return u(21)}async function hn(){return u(22)}async function wn(){return u(23)}async function bn(){return u(24)}async function Pn(){return u(25)}async function xn(){return u(1)}async function _n(){return u(2)}async function An(){return u(3)}async function Tn(){return u(4)}async function vn(){return u(6)}async function On(){return u(7)}async function En(){return u(8)}async function Mn(){return u(9)}async function Cn(){return u(10)}async function Ln(){return u(11)}async function Fn(){return u(5)}async function Sn(){return u(12)}async function Un(){return u(13)}async function Dn(){return u(17)}async function In(){return u(14)}async function Nn(){return u(15)}async function Rn(){return u(16)}var kn=h()?"\\":"/",Wn=h()?";":":";async function zn(...n){return r({__millenniumModule:"Path",message:{cmd:"resolve",paths:n}})}async function Hn(n){return r({__millenniumModule:"Path",message:{cmd:"resolvePath",path:n,directory:17}})}async function Gn(n){return r({__millenniumModule:"Path",message:{cmd:"normalize",path:n}})}async function Vn(...n){return r({__millenniumModule:"Path",message:{cmd:"join",paths:n}})}async function qn(n){return r({__millenniumModule:"Path",message:{cmd:"dirname",path:n}})}async function Yn(n){return r({__millenniumModule:"Path",message:{cmd:"extname",path:n}})}async function Bn(n,e){return r({__millenniumModule:"Path",message:{cmd:"basename",path:n,ext:e}})}async function jn(n){return r({__millenniumModule:"Path",message:{cmd:"isAbsolute",path:n}})}var K={};p(K,{exit:()=>$n,relaunch:()=>Jn});async function $n(n=0){await r({__millenniumModule:"Process",message:{cmd:"exit",exitCode:n}})}async function Jn(){await r({__millenniumModule:"Process",message:{cmd:"relaunch"}})}var X={};p(X,{Command:()=>g,exec:()=>Qn,execSidecar:()=>Zn,open:()=>Xn,showItemInFolder:()=>ii,spawn:()=>ei,spawnSidecar:()=>ni});async function Kn(n,e,i=[],t){return typeof i=="object"&&Object.freeze(i),r({__millenniumModule:"Shell",message:{cmd:"execute",program:e,args:i,options:t,onEventFn:f(n)}})}var U=class{constructor(){c(this,"eventListeners",new Map)}addEventListener(e,i){return this.eventListeners.has(e)?this.eventListeners.get(e).push(i):this.eventListeners.set(e,[i]),this}removeEventListener(e,i){if(this.eventListeners.has(e)){let t=this.eventListeners.get(e),o=t.indexOf(i);o>=0&&t.splice(o,1)}return this}on(e,i){return this.addEventListener(e,i)}off(e,i){return this.removeEventListener(e,i)}once(e,i){let t=o=>{i(o),this.removeEventListener(e,t)};return this.addEventListener(e,t)}prependEventListener(e,i){return this.eventListeners.has(e)?this.eventListeners.get(e).unshift(i):this.eventListeners.set(e,[i]),this}prependOnceListener(e,i){let t=o=>{i(o),this.removeEventListener(e,t)};return this.prependEventListener(e,t)}emit(e,i){return this.eventListeners.has(e)&&this.eventListeners.get(e).forEach(t=>t(i)),this}},se=class{constructor(e){this.pid=e}async write(e){return await r({__millenniumModule:"Shell",message:{cmd:"stdinWrite",pid:this.pid,buffer:typeof e=="string"?e:Array.from(e)}})}async kill(){return await r({__millenniumModule:"Shell",message:{cmd:"killChild",pid:this.pid}})}},g=class extends U{constructor(i,t=[],o={}){super();this.program=i;c(this,"args");c(this,"options");c(this,"stdout",new U);c(this,"stderr",new U);this.args=typeof t=="string"?[t]:t,this.options=o}static sidecar(i,t=[],o){let s=new g(i,t,o);return s.options.sidecar=!0,s}async spawn(){let t=await Kn(({event:o,payload:s})=>{switch(o){case"Error":this.emit("error",s);break;case"Terminated":this.emit("close",s);break;case"Stdout":this.stdout.emit("data",s);break;case"Stderr":this.stderr.emit("data",s);break}},this.program,this.args,this.options);return new se(t)}execute(){return new Promise((i,t)=>{this.on("error",t);let o=[],s=[];this.stdout.on("data",l=>o.push(l)),this.stderr.on("data",l=>s.push(l)),this.on("close",l=>{i({code:l.code,signal:l.signal,stdout:o.join(`
`),stderr:s.join(`
`)})}),this.spawn().catch(t)})}};async function Xn(n,e){return await r({__millenniumModule:"Shell",message:{cmd:"open",path:n,with:e}})}async function Qn(n,e=[],i={}){return await new g(n,e,i).execute()}async function Zn(n,e=[],i={}){return await g.sidecar(n,e,i).execute()}async function ei(n,e=[],i={}){return await new g(n,e,i).spawn()}async function ni(n,e=[],i={}){return await g.sidecar(n,e,i).spawn()}async function ii(n){if(h())await new g("explorer",["/select,",n]).execute();else if(ne())await new g("dbus-send",["--session","--print-reply","--dest=org.freedesktop.FileManager1","--type=method_call","/org/freedesktop/FileManager1","org.freedesktop.FileManager1.ShowItems",`array:string:"file://${n}"`,'string:""']).execute();else if(ie())await new g("open",["-R",n]).execute();else throw new Error("Unsupported platform")}var Q={};p(Q,{checkForUpdates:()=>ri,installUpdate:()=>ti,onUpdaterEvent:()=>ae});async function ae(n){return v("millennium://update-status",null,e=>{n(e==null?void 0:e.payload)})}function ti(){let n;function e(){n==null||n(),n=void 0}return new Promise((i,t)=>{function o(s){if(s.error)return e(),t(s.error);if(s.status==="DONE")return e(),i()}ae(o).then(s=>{n=s}).catch(s=>{throw e(),s}),T("millennium://update-install").catch(s=>{throw e(),s})})}function ri(){let n;function e(){n==null||n(),n=void 0}return new Promise((i,t)=>{function o(l){return e(),i({manifest:l,shouldUpdate:!0})}function s(l){if(l.error)return e(),t(l.error);if(l.status==="UPTODATE")return e(),i({shouldUpdate:!1})}F("millennium://update-available",null,l=>{o(l==null?void 0:l.payload)}).catch(l=>{throw e(),l}),ae(s).then(l=>{n=l}).catch(l=>{throw e(),l}),T("millennium://update").catch(l=>{throw e(),l})})}var C={};p(C,{LogicalPosition:()=>M,LogicalSize:()=>E,PhysicalPosition:()=>P,PhysicalSize:()=>b,UserAttentionType:()=>Z,WebviewWindow:()=>y,appWindow:()=>D,availableMonitors:()=>li,currentMonitor:()=>si,getAllWindows:()=>Ae,getCurrentWindow:()=>oi,primaryMonitor:()=>ai});var E=class{constructor(e,i){this.width=e;this.height=i;c(this,"TYPE","Logical")}},b=class{constructor(e,i){this.width=e;this.height=i;c(this,"TYPE","Physical")}toLogical(e){return new E(this.width/e,this.height/e)}},M=class{constructor(e,i){this.x=e;this.y=i;c(this,"TYPE","Logical")}},P=class{constructor(e,i){this.x=e;this.y=i;c(this,"TYPE","Physical")}toLogical(e){return new M(this.x/e,this.y/e)}};function xe(n){if(!n||n.TYPE!=="Logical"&&n.TYPE!=="Physical")throw new Error("Invalid position! Must be an instance of `LogicalPosition` or `PhysicalPosition`.")}function le(n){if(!n||n.TYPE!=="Logical"&&n.TYPE!=="Physical")throw new Error("Invalid size! Must be an instance of `LogicalSize` or `PhysicalSize`.")}var Z=(i=>(i[i.CRITICAL=1]="CRITICAL",i[i.INFORMATIONAL=2]="INFORMATIONAL",i))(Z||{});function oi(){return new y(window.__MILLENNIUM_METADATA__.__currentWindow.label,{skip:!0})}function Ae(){return window.__MILLENNIUM_METADATA__.__windows.map(({label:n})=>new y(n,{skip:!0}))}var _e=["millennium://window-created","millennium://error"],ue=class{constructor(e){this.label=e;c(this,"listeners",new Map)}async listen(e,i){if(this.handleMillenniumEvent(e,i)){let t=this.listeners.get(e);return t==null||t.splice(t.indexOf(i),1),()=>{}}return await v(e,this.label,i)}async once(e,i){if(this.handleMillenniumEvent(e,i)){let t=this.listeners.get(e);return t.splice(t.indexOf(i),1),()=>{}}return await F(e,this.label,i)}async emit(e,i){var t;if(_e.includes(e)){for(let o of(t=this.listeners.get(e))!=null?t:[])o({event:e,id:-1,windowLabel:this.label,payload:i});return}return await T(e,this.label,i)}handleMillenniumEvent(e,i){return _e.includes(e)?(this.listeners.has(e)?this.listeners.get(e).push(i):this.listeners.set(e,[i]),!0):!1}},me=class extends ue{async _manage(e,i){return await r({__millenniumModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:d({type:e},i!==void 0?{payload:i}:{})}}})}async scaleFactor(){return await this._manage("scaleFactor")}async innerPosition(){return await this._manage("position").then(({x:e,y:i})=>new P(e,i))}async outerPosition(){return await this._manage("outerPosition").then(({x:e,y:i})=>new P(e,i))}async innerSize(){return await this._manage("innerSize").then(({width:e,height:i})=>new b(e,i))}async outerSize(){return await this._manage("outerSize").then(({width:e,height:i})=>new b(e,i))}async isFullscreen(){return await this._manage("isFullscreen")}async isMinimized(){return await this._manage("isMinimized")}async isMaximized(){return await this._manage("isMaximized")}async isDecorated(){return await this._manage("isDecorated")}async isResizable(){return await this._manage("isResizable")}async isVisible(){return await this._manage("isVisible")}async title(){return await this._manage("title")}async theme(){return await this._manage("theme")}async center(){return await this._manage("center")}async requestUserAttention(e=null){return await this._manage("requestUserAttention",e===1?{type:"Critical"}:e===2?{type:"Informational"}:null)}async setResizable(e){return await this._manage("setResizable",e)}async setTitle(e){return await this._manage("setTitle",e)}async maximize(){return await this._manage("maximize")}async unmaximize(){return await this._manage("unmaximize")}async toggleMaximized(){return await this._manage("toggleMaximized")}async minimize(){return await this._manage("minimize")}async unminimize(){return await this._manage("unminimize")}async show(){return await this._manage("show")}async hide(){return await this._manage("hide")}async close(){return await this._manage("close")}async setDecorations(e){return await this._manage("setDecorations",e)}async setAlwaysOnTop(e){return await this._manage("setAlwaysOnTop",e)}async setContentProtected(e){return await this._manage("setContentProtected",e)}async setSize(e){return le(e),await this._manage("setSize",{type:e.TYPE,data:{width:e.width,height:e.height}})}async setMinimumSize(e=null){return e&&le(e),await this._manage("setMinSize",e===null?null:{type:e.TYPE,data:{width:e.width,height:e.height}})}async setMaximumSize(e=null){return e&&le(e),await this._manage("setMaxSize",e===null?null:{type:e.TYPE,data:{width:e.width,height:e.height}})}async setPosition(e){return xe(e),await this._manage("setPosition",{type:e.TYPE,data:{x:e.x,y:e.y}})}async setFullscreen(e){return await this._manage("setFullscreen",e)}async focus(){return await this._manage("setFocus")}async setIcon(e){return await this._manage("setIcon",{icon:typeof e=="string"?e:Array.from(e)})}async setShowInTaskbar(e=!0){return await this._manage("setSkipTaskbar",e)}async setCursorGrab(e){return await this._manage("setCursorGrab",e)}async setCursorVisible(e){return await this._manage("setCursorVisible",e)}async setCursorIcon(e){return await this._manage("setCursorIcon",e)}async setCursorPosition(e){return xe(e),await this._manage("setCursorPosition",{type:e.TYPE,data:{x:e.x,y:e.y}})}async setIgnoreCursorEvents(e){return await this._manage("setCursorIcon",e)}async startDragging(){return await this._manage("startDragging")}},y=class extends me{constructor(e,i={}){super(e),i.skip||r({__millenniumModule:"Window",message:{cmd:"createWebview",data:{options:d({label:e},i)}}}).then(async()=>this.emit("millennium://window-created")).catch(async t=>this.emit("millennium://error",t))}static getByLabel(e){return Ae().some(i=>i.label===e)?new y(e,{skip:!0}):null}},D;"__MILLENNIUM_METADATA__"in window?D=new y(window.__MILLENNIUM_METADATA__.__currentWindow.label,{skip:!0}):(console.warn(`Could not find __MILLENNIUM_METADATA__. The "appWindow" value will reference the window with the "main" label.
This is not an issue if you are running this frontend in a browser instead of a Millennium window.`),D=new y("main",{skip:!0}));function ce(n){return n===null?null:{name:n.name,scaleFactor:n.scaleFactor,position:new P(n.position.x,n.position.y),size:new b(n.size.width,n.size.height)}}async function si(){return await r({__millenniumModule:"Window",message:{cmd:"manage",data:{cmd:{type:"currentMonitor"}}}}).then(ce)}async function ai(){return r({__millenniumModule:"Window",message:{cmd:"manage",data:{cmd:{type:"primaryMonitor"}}}}).then(ce)}async function li(){return await r({__millenniumModule:"Window",message:{cmd:"manage",data:{cmd:{type:"availableMonitors"}}}}).then(n=>n.map(ce))}return Le(ui);})();
;Object.defineProperty(window,"Millennium",{value:Millennium,writable:false,configurable:false,enumerable:true});(()=>{function _DF(e){const d=Object.getOwnPropertyNames(e);for(const g of d)if(typeof e[g]=="object")_DF(e[g]);Object.freeze(e)}_DF(window.Millennium)})();
